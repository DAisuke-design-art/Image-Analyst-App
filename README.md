
# Image Analyst App (Gemini 3.0 Imaginator)

画像をアップロードして分析し、画像生成AI（Stable DiffusionやMidjourneyなど）で使用可能な詳細なプロンプト（JSON形式）と、構図やキャラクターデザインの参考となるビジュアルガイドを生成するアプリケーションです。

Google Gemini API (Gemini 2.5 Flash / Gemini 2.5 Flash Image) を活用しています。

## 主な機能

1.  **画像分析 (Image Analysis)**
    *   アップロードされた画像を解析し、キャラクターのアイデンティティ、視覚スタイル、顔の特徴、服装、背景情報を詳細なJSONデータとして抽出します。
    *   全要素を統合した「Full Prompt」も生成されます。

2.  **ポーズ線画生成 (Pose Line Art)**
    *   元画像の構図とポーズを忠実に再現した、シンプルな線画（白黒）を生成します。
    *   ControlNetなどの参照画像として使用することを想定しています。
    *   顔の詳細はあえて少し抽象化し、構図としての使いやすさを重視しています。

3.  **正面顔ガイド生成 (Frontal Face Visual Guide)**
    *   元画像が横顔や斜めであっても、キャラクターの顔を「正面向き（Frontal View）」に変換した線画を生成します。
    *   キャラクターデザイン（三面図など）の作成や、LoRA学習用のデータセット作成支援に役立ちます。

4.  **顔専用プロンプト生成 (Frontal Face JSON)**
    *   「正面顔ガイド」に対応する、顔の特徴（目、髪型、表情など）に特化した詳細なJSONプロンプトを生成します。

5.  **Notion保存連携**
    *   Google Apps Script (GAS) を経由して、解析結果や生成された画像をNotionデータベース等に保存する機能があります。

## 使用しているモデル

*   **gemini-2.5-flash**: 高速なマルチモーダル理解による画像のテキスト解析（JSON生成）。
*   **gemini-2.5-flash-image**: 画像入力から新しい画像を生成（ポーズ線画、正面顔線画の生成）。

## セットアップ

1.  プロジェクトのルートで依存関係をインストールし、開発サーバーを起動してください。
2.  `App.tsx` 内の `GAS_API_URL` 定数に、デプロイしたGoogle Apps ScriptのWebアプリURLを設定してください（保存機能を使用する場合）。
3.  Gemini APIキーが必要です（初回起動時に設定ダイアログ、または環境変数）。

## 開発メモ

*   **スタイルの統一**: すべての文字列値は日本語で出力されるようにプロンプトエンジニアリングされています。
*   **レイアウト**: 3カラム構成（ソース画像 / 全体分析 / ビジュアルガイド＆顔分析）で、作業効率を高めています。
*   **ショートカット**: チャット欄で `Cmd/Ctrl + Enter` を押すと、分析を実行できます。
